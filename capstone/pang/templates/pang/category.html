<!DOCTYPE html>
<html>
<body>
    {% for category in categories %}
        <!--<a href="pang/detail/"><h2>{{ category.name }}</h2></a>-->
        <h2 class="data-category-id">
            <a href="{% url 'detail' category.id %}">{{ category.name }}</a>
        </h2>
    {% endfor %}

    <h2>Add a new category: </h2>
    <form method="POST" action="{% url 'add_category' %}">
        {% csrf_token %}
        <input type="text" name="category_name" placeholder="Enter new Category" required>
        <input type="text" name="item_name" placeholder="Enter new item">  <!-- Item field is not required -->
        <input type="submit" value="Add">
    </form>

    

    <script>
       
       document.querySelectorAll('.category').forEach(function(element) {
        element.addEventListener('dblclick', function(event) {
            var category_id = event.target.getAttribute('data-category-id');
            if (confirm('Are you sure you want to delete this category?')) {
                fetch('/delete_category/' + category_id, {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': '{{ csrf_token }}'
                    }
                }).then(function() {
                    window.location.reload();
                });
            }
        });
    });

        
        </script>        
</body>
</html>

